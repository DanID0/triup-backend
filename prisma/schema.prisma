generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = "postgresql://kanban_user:secure_password_123@localhost:5432/kanban_db"
}

model User{
id BigInt @id @unique @default(autoincrement())
username String @unique
password String
email String @unique
role Role @default(USER)
interfaceLanguage Language  @default(LATVIAN)
Workspace Workspace?
Tasks Task[]
Comments Comment[]
}

enum Role {
  ADMIN
  USER
}
enum Language {
  LATVIAN
  ENGLISH
  RUSSIAN
}

model Workspace {
  id BigInt @unique @id @default(autoincrement())
  userId BigInt @unique
  user User @relation(fields: [userId], references: [id])
  name String
  accessType AccessType @default(Public)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Boards Board[]
  
}
enum AccessType {
  Public
  Private
}

model Board {
id BigInt @unique @id @default(autoincrement())
workspaceId BigInt @unique
workspace Workspace @relation(fields: [workspaceId], references: [id])
name String
invitedUserRights InvitedUserRights @default(Guest)
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
columns Column[]
}

enum InvitedUserRights {
  Guest
  Member
  Admin
}

model Column {
  id BigInt @unique @id @default(autoincrement())
  boardId BigInt @unique
  board Board @relation(fields: [boardId], references: [id])
  position Int @default(0)
  color String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tasks Task[]
}
model Task {
  id BigInt @unique @id @default(autoincrement())
  columnId BigInt @unique
  column Column @relation(fields: [columnId], references: [id])
  name String
  description String?
  priority Priority @default(Medium)
  dueDate DateTime?
  assigneeId BigInt?
  assignee User? @relation(fields: [assigneeId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  comments Comment[]
}
enum Priority {
  Low
  Medium
  High
}
model Comment {
  id BigInt @unique @id @default(autoincrement())
  taskId BigInt @unique
  task Task @relation(fields: [taskId], references: [id])
  userId BigInt
  user User @relation(fields: [userId], references: [id])
  content String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}